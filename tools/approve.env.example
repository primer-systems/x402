# Primer x402 Token Approval Configuration
# This file configures the token approval tool (approve.js)
# 
# Approval is required for standard ERC-20 tokens to work with PrimerPrism
# EIP-3009 tokens (like USDC) do NOT require approval
# 
# x402 Protocol: https://x402.org
# Documentation: https://github.com/primer-systems/x402
# Website: https://primer.systems

# ================ REQUIRED VARIABLES ================

# NETWORK - Blockchain network to use
# Accepts both numeric chain IDs and text names:
#   8453 or base        = Base Mainnet
#   97 or base-sepolia   = Base Sepolia
#   8453 or base        = Base Mainnet
#   84532 or base-sepolia = Base Sepolia Testnet
NETWORK=

# APPROVER_KEY - Private key of the token holder
# Format: 0x followed by 64 hexadecimal characters
# This wallet must hold the tokens you want to approve
# SECURITY: Never commit this file with real private keys to version control!
APPROVER_KEY=

# TOKEN - ERC-20 token contract address to approve
# Format: 0x followed by 40 hexadecimal characters
# This is the token you want to use for x402 payments
TOKEN=

# ================ OPTIONAL VARIABLES ================

# PRISM_CONTRACT - PrimerPrism contract address
# Leave empty (recommended) to automatically fetch from API
# The script will retrieve the latest deployed version from:
#   https://x402.primer.systems/contracts
#
# Manual override example:
#   PRISM_CONTRACT=0x40200001004B5110333e4De8179426971Efd034A
PRISM_CONTRACT=

# AMOUNT - Approval amount
# Options:
#   "unlimited" = Maximum approval (recommended for convenience)
#   "1000.0"    = Specific amount in token units
#
# "unlimited" means the PrimerPrism contract can spend any amount
# of your tokens. You only need to approve once per token.
#
# Setting a specific amount means you'll need to re-approve when it runs out.
AMOUNT=unlimited

# FACILITATOR_API - Primer x402 facilitator service endpoint
# Default: https://x402.primer.systems
# Only change this if running your own facilitator or testing locally
# FACILITATOR_API=http://localhost:3000

# ================ IMPORTANT NOTES ================

## When Do You Need Approval?
# ✅ Required: Standard ERC-20 tokens (e.g., USDT, most tokens)
# ❌ Not Required: EIP-3009 tokens (e.g., USDC)
#
# The signer.js script will tell you if approval is needed when you
# create a payment authorization.

## What Does Approval Do?
# Token approval allows the PrimerPrism contract to transfer
# tokens on your behalf when you create x402 payment authorizations.
#
# This is a standard ERC-20 pattern used by all DeFi protocols.
# The contract CANNOT move your tokens without a signed authorization
# from you (created with signer.js).

## Security Considerations
# Unlimited Approval:
#   ✅ Convenient (approve once, use forever)
#   ⚠️  The contract CAN spend unlimited tokens (with your signed authorization)
#   ✅ PrimerPrism is non-custodial and trust-minimized
#   ✅ Contract audited and open source
#
# Limited Approval:
#   ✅ More conservative (limits exposure)
#   ⚠️  Need to re-approve when amount runs out
#   ⚠️  More gas fees for repeated approvals

## How x402 Payments Work
# 1. Approve tokens (this script) - One time per token
# 2. Create payment authorization (signer.js) - Each payment
# 3. Send to facilitator or resource server
# 4. Facilitator settles payment on-chain
# 5. Tokens transferred from your wallet to recipient

## Trust Model
# You trust:
#   - PrimerPrism contract (audited, open source)
#   - Your own signed authorizations (you control the keys)
#
# You don't need to trust:
#   - The facilitator (cannot move funds without your signature)
#   - The recipient (cannot pull funds, only receive authorized amounts)

# ================ EXAMPLES ================

# Example 1: Approve token on Base Mainnet (unlimited)
# NETWORK=56
# APPROVER_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
# TOKEN=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
# PRISM_CONTRACT=
# AMOUNT=unlimited

# Example 2: Approve custom token on Base Sepolia (limited amount)
# NETWORK=97
# APPROVER_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
# TOKEN=0xYourTokenAddressHere000000000000000000
# PRISM_CONTRACT=
# AMOUNT=1000.0

# Example 3: Using specific Prism contract
# NETWORK=56
# APPROVER_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
# TOKEN=0xYourTokenAddressHere000000000000000000
# PRISM_CONTRACT=0x40200001004B5110333e4De8179426971Efd034A
# AMOUNT=unlimited

# ================ WORKFLOW ================

## Step-by-Step Usage:
# 1. Copy this file to approve.env
# 2. Fill in your NETWORK, APPROVER_KEY, and TOKEN
# 3. Run: npm run approve (or: node approve.js)
# 4. Confirm the approval transaction
# 5. Once approved, use signer.js to create payments

## After Approval:
# - You can create unlimited payment authorizations with signer.js
# - Each payment requires a new signature from you
# - The facilitator pays gas fees for settlement
# - Your tokens are only moved when YOU sign a payment authorization

# ================ TROUBLESHOOTING ================

## "Could not get Prism contract address"
# - Check your internet connection
# - Try manually setting PRISM_CONTRACT from x402.primer.systems/contracts
# - Verify FACILITATOR_API is accessible

## "Insufficient funds for gas"
# - You need ETH for gas fees (on Base)
# - Get testnet ETH from faucet for testing
# - Approval costs ~50,000 gas

## "Token version not available"
# - This is normal for some tokens
# - The script will still work correctly

# ================ NEED HELP? ================
# 
# Documentation: https://github.com/primer-systems/x402
# Website: https://primer.systems
# x402 Protocol: https://x402.org
# Support: support@primer.systems

# ================ RPC ENDPOINTS (OPTIONAL) ================

# Custom RPC endpoints (optional - uses public RPCs by default)
# For better reliability, use QuickNode, Alchemy, or Infura
# Recommended for Base networks to avoid rate limiting
#
# RPC_BASE=https://your-quicknode-url.quiknode.pro/YOUR-KEY/
# RPC_BASE_SEPOLIA=https://your-quicknode-url.quiknode.pro/YOUR-KEY/
# RPC_BASE=https://your-quicknode-url.quiknode.pro/YOUR-KEY/
# RPC_BASE_SEPOLIA=https://your-quicknode-url.quiknode.pro/YOUR-KEY/
